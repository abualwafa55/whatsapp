# لوحة WhatsApp Web - دليل التشغيل

النسخة الحالية تعتمد كلياً على Node.js وواجهة ويب (Vite + React)، بدون أي مكونات Python.

## المتطلبات الأساسية

- **Node.js** ‏(20.19 أو أحدث، أو 22.12+). تحقق بالأمر `node -v`.
- **npm** يأتي مع Node تلقائياً.

## الإعداد السريع (موصى به)

1. شغّل ملف الإعداد مرة واحدة لتثبيت الاعتمادات:
   ```bat
   .\setup.bat
   ```
2. لتشغيل الواجهة والسيرفر معاً:
   ```bat
   .\run.bat
   ```
   سيُفتح نافذتان جديدتان (Baileys Server + Web Client). افتح المتصفح على `http://localhost:5173/`.

## التشغيل اليدوي

### 1. تثبيت الاعتمادات

```bat
cd baileys-server && npm install
cd web-client && npm install
```

### 2. تشغيل Baileys Server

```bat
cd baileys-server
npm start
```

### 3. تشغيل واجهة الويب (Vite)

في نافذة أخرى:

```bat
cd web-client
npm run dev
```

### 4. وضع الإنتاج (اختياري)

1. بناء الواجهة:
   ```bat
   cd web-client
   npm run build
   ```
2. تشغيل السيرفر فقط:
   ```bat
   cd baileys-server
   npm start
   ```
   سيخدم Express النسخة المبنية من `web-client/dist` تلقائياً.

## كيفية الاستخدام

1. افتح المتصفح على `http://localhost:5173/`.
2. أدخل **معرّف الجلسة** ثم اضغط على **إنشاء الجلسة**.
3. انتظر ظهور رمز QR وامسحه من واتساب: الإعدادات → الأجهزة المرتبطة.
4. بعد الاتصال ستتحول الحالة إلى “متصل”، ويمكنك إرسال الرسائل من نفس الصفحة.

## حل المشاكل الشائعة

- **لا يظهر رمز QR:** تأكد أن السيرفر يعمل على المنفذ 3000 وأن الاتصال غير محجوب من الجدار الناري.
- **الحالة تبقى غير متصلة:** امسح رمز QR مجدداً بعد حذف الجلسات القديمة (`clear-sessions.bat`).
- **فشل إرسال الرسالة:** تأكد من كتابة الرقم بصيغة دولية (مثال: `96279xxxxxxx`) وأن الحالة متصلة.

## ملاحظات مهمة

- بيانات الجلسات محفوظة داخل `baileys-server/sessions`؛ لا تشاركها مع أحد.
- يمكن تشغيل عدة جلسات لكن كل جلسة تحتاج مسح QR خاص بها.
- استخدم متصفح حديث (Chrome أو Edge) لضمان دعم WebSockets وESM.

## الدعم

- سجّل الأحداث يظهر داخل واجهة الويب.
- سجلات السيرفر تظهر في نافذة “Baileys Server”.
- لأي مشكلة إضافية راجع ملفات `.bat` أو افتح التذاكر في المستودع.
